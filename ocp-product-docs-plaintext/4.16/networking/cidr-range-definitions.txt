# CIDR range definitions


To ensure stable and accurate network routing in Red Hat OpenShift Container Platform clusters that use OVN-Kubernetes, define non-overlapping Classless Inter-Domain Routing (CIDR) subnet ranges. Establishing unique ranges prevents IP address conflicts so that internal traffic reaches its intended destination without interference.

[IMPORTANT]
----
For Red Hat OpenShift Container Platform 4.17 and later versions, clusters use 169.254.0.0/17 for IPv4 and fd69::/112 for IPv6 as the default masquerade subnet. You must avoid these ranges. For upgraded clusters, there is no change to the default masquerade subnet.
----

[TIP]
----
You can use the Red Hat OpenShift Network Calculator to decide your networking needs before setting CIDR range during cluster creation.
You must have a Red Hat account to use the calculator.
----
The following subnet types are mandatory for a cluster that uses OVN-Kubernetes:
* Join: Uses a join switch to connect gateway routers to distributed routers. A join switch reduces the number of IP addresses for a distributed router. For a cluster that uses the OVN-Kubernetes plugin, an IP address from a dedicated subnet is assigned to any logical port that attaches to the join switch.
* Masquerade: Prevents collisions for identical source and destination IP addresses that are sent from a node as hairpin traffic to the same node after a load balancer makes a routing decision.
* Transit: A transit switch is a type of distributed switch that spans across all nodes in the cluster. A transit switch routes traffic between different zones. For a cluster that uses the OVN-Kubernetes plugin, an IP address from a dedicated subnet is assigned to any logical port that attaches to the transit switch.

[NOTE]
----
You can change the join and transit CIDR ranges for your cluster as a post-installation task.
----
OVN-Kubernetes, the default network provider in Red Hat OpenShift Container Platform 4.14 and later versions, internally uses the following IP address subnet ranges:
* V4JoinSubnet: 100.64.0.0/16
* V6JoinSubnet: fd98::/64
* V4TransitSwitchSubnet: 100.88.0.0/16
* V6TransitSwitchSubnet: fd97::/64
* defaultV4MasqueradeSubnet: 169.254.0.0/17
* defaultV6MasqueradeSubnet: fd69::/112

[IMPORTANT]
----
The earlier list includes join, transit, and masquerade IPv4 and IPv6 address subnets. If your cluster uses OVN-Kubernetes, do not include any of these IP address subnet ranges in any other CIDR definitions in your cluster or infrastructure.
----
* Configuring OVN-Kubernetes internal IP address subnets.

# Machine CIDR

To establish the network scope for cluster nodes in Red Hat OpenShift Container Platform, specify an IP address range in the Machine Classless Inter-Domain Routing (CIDR) parameter. Defining this range ensures that all machines within the environment have valid, routable addresses for internal cluster communication.


[NOTE]
----
You cannot change Machine CIDR ranges after you create your cluster.
----

The default is 10.0.0.0/16. This range must not conflict with any connected networks.

* Cluster Network Operator configuration

# Service CIDR

To allocate IP addresses for cluster services in Red Hat OpenShift Container Platform, specify an IP address range in the Service Classless Inter-Domain Routing (CIDR) parameter. Defining this range ensures that internal services have a dedicated block of addresses for reliable communication without overlapping with node or pod networks.

The range must be large enough to accommodate your workload. The address block must not overlap with any external service accessed from within the cluster. The default is 172.30.0.0/16.

# Pod CIDR

To allocate internal network addresses for cluster workloads in Red Hat OpenShift Container Platform, specify an IP address range in the pod Classless Inter-Domain Routing (CIDR) field. Defining this range ensures that pods can communicate with each other reliably without overlapping with the node or service networks.

The range must be large enough to accommodate your workload. The address block must not overlap with any external service accessed from within the cluster. The default is 10.128.0.0/14.

# Host prefix

To allocate a dedicated pool of IP addresses for pods on each node in Red Hat OpenShift Container Platform, specify the subnet prefix length in the hostPrefix parameter. Defining an appropriate prefix ensures that every machine has sufficient unique addresses to support its scheduled workloads without exhausting the cluster&#8217;s network resources.