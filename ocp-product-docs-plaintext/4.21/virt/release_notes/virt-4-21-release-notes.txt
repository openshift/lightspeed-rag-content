# OpenShift Virtualization release notes

These release notes describe new features and enhancements, Technology Preview features, deprecated and removed features, fixed issues, and known issues for OpenShift Virtualization 4.2.

# Supported guest operating systems

To view the supported guest operating systems for OpenShift Virtualization, see Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, OpenShift Virtualization and Red Hat Enterprise Linux with KVM.

# Microsoft Windows SVVP certification

OpenShift Virtualization is certified in Microsoft&#8217;s Windows Server Virtualization Validation Program (SVVP) to run Windows Server workloads.

The SVVP certification applies to:

* Red Hat Enterprise Linux CoreOS workers. In the Microsoft SVVP Catalog, they are named Red Hat {product-title} 4.20.
* Intel and AMD CPUs.

# New features and enhancements

Custom MAC pool range configuration:: With this update, cluster administrators can specify a custom MAC pool range for a OpenShift Virtualization environment, preventing potential MAC address conflicts with other virtualization solutions on the same network. This gives cluster administrators more control over network resources, ensuring greater network stability and resource management efficiency.

CNV-63212

Enhancements for the virtual machines Search menu:: With this update, the search interface is enhanced, making it more noticeable and user-friendly. A prominent Search button and an advanced search option are introduced, allowing users to initiate a search with either the primary button or the Enter key. This streamlines the user experience and improves overall search functionality.

CNV-70130
New flag introduced to prevent unintentional VNC disconnects:: A new, optional --preserve-session flag has been introduced for VMs. This flag prevents an existing VNC console connection from being disconnected if you attempt to start a new session.

If you attempt to create a second connection to the VNC console by using the virtctl CLI when this flag is set, an error is displayed and the connection fails.

If you attempt to create a second connection to the VNC console by using the web console, a warning is displayed, and you are prompted to disconnect the existing session before you create the new session.

CNV-66115
Starting a virtual machine console from the tree-view:: You can now start a virtual machine (VM) console session by clicking on the name of the running VM in the navigation panel, and then selecting Open Console.

CNV-70942

# Deprecated features

The HotplugVolume feature gate is deprecated:: The HotplugVolume feature gate, which allows you to add storage without restarting your VM, is deprecated and will be removed in a future release. This feature gate will be replaced by DeclarativeHotplugVolumes.

[NOTE]
----
DeclarativeHotplugVolumes does not support hot plugging ephemeral volumes. Ephemeral volumes are hot plugged to a VMI and do not persist in the owner VM. Existing ephemeral volumes that are hot plugged are automatically detached after you switch to the DeclarativeHotplugVolumes feature gate.
----

CNV-73301

# Removed features

Removed features are no longer supported in OpenShift Virtualization.

Legacy virtctl ssh target syntax removed:: With this release, support for the virtctl ssh type/name[.namespace] target syntax has been removed. You must specify the target by using an explicit resource type, such as vmi/<name> or vm/<name>. Scripts and automation that rely on the removed syntax must be updated.

Support for kubevirt-virtctl RPM removed:: With this release, support for the RHEL 8 kubevirt-virtctl RPM is removed and no longer supported.

# Technology Preview features

Some features in this release are currently in Technology Preview. These experimental features are not intended for production use. Note the following scope of support on the Red Hat Customer Portal for these features:

Technology Preview Features Support Scope

OpenShift Virtualization support for Azure Boost (Technology Preview):: OpenShift Virtualization clusters can run on Azure Boost, which provides dedicated host hardware to improve performance and isolation for Azure virtual machines. This capability is a Technology Preview feature.

CNV-58005

Golden image support for heterogeneous clusters (Technology Preview):: Golden image support is available for heterogeneous clusters, which enables you to create and use golden images for virtual machines in environments with differing node configurations. This capability is a Technology Preview feature.

CNV-62357

Custom video device support in virtual machines (Technology Preview):: You can now configure a custom video device type when creating a virtual machine. Configuring a custom device type overrides the default video configuration, and allows you to specify different video devices, based on your guest operating system requirements and performance needs. This capability is a Technology Preview feature.

CNV-71192

# Fixed issues



# Known issues

Some linked Jira tickets are accessible only with Red Hat credentials.

VMs using the cnv-bridge CNI fail to live migrate after updates from 4.12:: When you update from {product-title} 4.12 to a newer minor version, virtual machines that use the cnv-bridge Container Network Interface (CNI) fail to live migrate. As a consequence, live migration fails for affected VMs.

To work around this problem, change the spec.config.type field in your NetworkAttachmentDefinition manifest from cnv-bridge to bridge before you perform the update. As a result, live migration succeeds for VMs that use the updated network attachment definitions.

Known issue when migrating VMs that use the cnv-bridge CNI

Red Hat OpenShift Service Mesh 3.1.1 and Istio 1.25 and later are incompatible with OpenShift Virtualization:: Red Hat OpenShift Service Mesh 3.1.1 and Istio versions 1.25 and later are incompatible with OpenShift Virtualization 4.2 because the traffic.sidecar.istio.io/kubevirtInterfaces annotation is deprecated. As a consequence, service mesh integration with OpenShift Virtualization can fail when you use these versions.

To work around this problem, when you install Service Mesh for integration with OpenShift Virtualization, select Red Hat OpenShift Service Mesh version 3.0.4 and Istio 1.24.4 instead of the default versions that are displayed in the web console.

OSSM-10883

Node labels remain after uninstalling OpenShift Virtualization:: Uninstalling OpenShift Virtualization does not remove the feature.node.kubevirt.io node labels that OpenShift Virtualization creates. As a consequence, nodes can still appear as if they are configured for virtualization workloads.

To work around this problem, manually remove the feature.node.kubevirt.io labels from affected nodes after you uninstall OpenShift Virtualization.

CNV-38543

Live migration fails when VM names exceed 47 characters:: Live migration fails if a virtual machine name exceeds 47 characters. As a consequence, you cannot live migrate VMs with longer names.

To work around this problem, use VM names that are 47 characters or fewer when you create VMs that you plan to live migrate.

CNV-61066

Service account volume becomes invalid after VM migration:: OpenShift Virtualization links a service account token in use by a pod to that specific pod by creating a disk image that contains the token. If you migrate a VM, the service account volume becomes invalid for the migrated VM. As a consequence, workloads that rely on that service account token can fail after migration.

To work around this problem, use user accounts instead of service accounts, because user account tokens are not bound to a specific pod.

CNV-33835

Call traces appear for virtio_balloon free page reporting on s390x VMs:: When you create a VM by using Red Hat Enterprise Linux (RHEL) container disk images for s390x architecture, call traces that reference virtio_balloon free page reporting print to the VM console because of a kernel bug. As a consequence, the VM console output includes repeated call trace messages.

To work around this problem, disable memory ballooning for the VM by adding the following parameter to the VM YAML configuration: spec.domain.devices.autoattachMemBalloon: false. You can also disable free page reporting of memory ballooning for all new VMs by editing the HyperConverged custom resource and adding the parameter spec.virtualMachineOptions.disableFreePageReporting: true.

OCPBUGS-51113

Incorrect boot mode options for s390x virtual machines:: VMs that are based on s390x architecture can use only the IPL boot mode. However, in the {product-title} web console, the Boot mode list for s390x VMs incorrectly includes BIOS, UEFI, and UEFI (secure) boot modes. If you select one of these modes for an s390x-based VM, the operation fails. As a consequence, VM creation or updates can fail when you select an unsupported boot mode.

To work around this problem, always select the IPL boot mode for s390x-based VMs.

CNV-56889