# Using the CLI tools


You can manage OpenShift Virtualization resources by using the virtctl command-line tool.
You can access and modify virtual machine (VM) disk images by using the libguestfs command-line tool. You deploy libguestfs by using the virtctl libguestfs command.

# Installing virtctl

To install virtctl on Red Hat Enterprise Linux (RHEL) 9 or later, Linux, Windows, and MacOS operating systems, you can download and install the virtctl binary file.

## Installing the virtctl binary on RHEL 9 or later, Linux, Windows, or macOS

You can download the virtctl binary by using the {product-title} web console and then install it on Red Hat Enterprise Linux (RHEL) 9 or later, Linux, Windows, or macOS.

1. Navigate to the Virtualization -> Overview page in the web console.
2. Click the Download virtctl link to download the virtctl binary for your operating system.
3. Install virtctl:
* For RHEL and other Linux operating systems:
1. Decompress the archive file:

```terminal
$ tar -xvf <virtctl-version-distribution.arch>.tar.gz
```

2. Run the following command to make the virtctl binary executable:

```terminal
$ chmod +x <path/virtctl-file-name>
```

3. Move the virtctl binary to a directory in your PATH environment variable.

You can check your path by running the following command:

```terminal
$ echo $PATH
```

4. Set the KUBECONFIG environment variable:

```terminal
$ export KUBECONFIG=/home/<user>/clusters/current/auth/kubeconfig
```

* For Windows:
1. Decompress the archive file.
2. Navigate the extracted folder hierarchy and double-click the virtctl executable file to install the client.
3. Move the virtctl binary to a directory in your PATH environment variable.

You can check your path by running the following command:

```terminal
C:\> path
```

* For macOS:
1. Decompress the archive file.
2. Move the virtctl binary to a directory in your PATH environment variable.

You can check your path by running the following command:

```terminal
echo $PATH
```


# virtctl commands

The virtctl client is a command-line utility for managing OpenShift Virtualization resources.


[NOTE]
----
The virtual machine (VM) commands also apply to virtual machine instances (VMIs) unless otherwise specified.
----

## virtctl information commands

You can use the following virtctl information commands to view information about the virtctl client.



## VM information commands

You can use virtctl to view information about virtual machines (VMs) and virtual machine instances (VMIs).



## VM manifest creation commands

You can use the following virtctl create commands to create manifests for virtual machines, instance types, and preferences.



## VM management commands

You can use the following virtctl commands to manage and migrate virtual machines (VMs) and VM instances (VMIs).



## VM connection commands

You use can use the following virtctl commands to expose ports and connect to virtual machines (VMs) and VM instances (VMIs).



## VM export commands

Use virtctl vmexport commands to create, download, or delete a volume exported from a VM, VM snapshot, or persistent volume claim (PVC). Certain manifests also contain a header secret, which grants access to the endpoint to import a disk image in a format that OpenShift Virtualization can use.



## Hot plug and hot unplug  commands

You can use the following virtctl commands to add or remove resources from running virtual machines (VMs) and VM instances (VMIs).



## Image upload commands

You can use the following virtctl image-upload commands to upload a VM image to a data volume.



# Deploying libguestfs by using virtctl

You can use the virtctl guestfs command to deploy an interactive container with libguestfs-tools and a persistent volume claim (PVC) attached to it.

* To deploy a container with libguestfs-tools, mount the PVC, and attach a shell to it, run the following command:

```terminal
$ virtctl guestfs -n <namespace> <pvc_name> 1
```

The PVC name is a required argument. If you do not include it, an error message appears.

## Libguestfs and virtctl guestfs commands

Libguestfs tools help you access and modify virtual machine (VM) disk images. You can use libguestfs tools to view and edit files in a guest, clone and build virtual machines, and format and resize disks.

You can also use the virtctl guestfs command and its sub-commands to modify, inspect, and debug VM disks on a PVC. To see a complete list of possible sub-commands, enter virt- on the command line and press the Tab key. For example:



By default, virtctl guestfs creates a session with everything needed to manage a VM disk. However, the command also supports several flag options if you want to customize the behavior:



The command also checks if a PVC is in use by another pod, in which case an error message appears. However, once the libguestfs-tools process starts, the setup cannot avoid a new pod using the same PVC. You must verify that there are no active virtctl guestfs pods before starting the VM that accesses the same PVC.


[NOTE]
----
The virtctl guestfs command accepts only a single PVC attached to the interactive pod.
----

# Using Ansible

To use the Ansible collection for OpenShift Virtualization, see Red Hat Ansible Automation Hub (Red Hat Hybrid Cloud Console).