# Removing Service Mesh



[WARNING]
----
You are viewing documentation for a Red Hat OpenShift Service Mesh release that is no longer supported.
Service Mesh version 1.0 and 1.1 control planes are no longer supported. For information about upgrading your service mesh control plane, see Upgrading Service Mesh.
For information about the support status of a particular Red Hat OpenShift Service Mesh release, see the Product lifecycle page.
----
To remove Red Hat OpenShift Service Mesh from an existing {product-title} instance, remove the control plane before removing the operators.

# Removing the Red Hat OpenShift Service Mesh control plane

To uninstall Service Mesh from an existing {product-title} instance, first you delete the Service Mesh control plane and the Operators. Then, you run commands to remove residual resources.

## Removing the Service Mesh control plane using the web console

You can remove the Red Hat OpenShift Service Mesh control plane by using the web console.

1. Log in to the {product-title} web console.
2. Click the Project menu and select the project where you installed the Service Mesh control plane, for example istio-system.
3. Navigate to Ecosystem -> Installed Operators.
4. Click Service Mesh Control Plane under Provided APIs.
5. Click the ServiceMeshControlPlane menu ..
6. Click Delete Service Mesh Control Plane.
7. Click Delete on the confirmation dialog window to remove the ServiceMeshControlPlane.

## Removing the Service Mesh control plane using the CLI

You can remove the Red Hat OpenShift Service Mesh control plane by using the CLI.  In this example, istio-system is the name of the control plane project.

1. Log in to the {product-title} CLI.
2. Run the following command to delete the ServiceMeshMemberRoll resource.

```terminal
$ oc delete smmr -n istio-system default
```

3. Run this command to retrieve the name of the installed ServiceMeshControlPlane:

```terminal
$ oc get smcp -n istio-system
```

4. Replace <name_of_custom_resource> with the output from the previous command, and run this command to remove the custom resource:

```terminal
$ oc delete smcp -n istio-system <name_of_custom_resource>
```


# Removing the installed Operators

You must remove the Operators to successfully remove Red Hat OpenShift Service Mesh. After you remove the Red Hat OpenShift Service Mesh Operator, you must remove the Kiali Operator, the Red Hat OpenShift Distributed Tracing Platform (Jaeger) Operator, and the OpenShift Elasticsearch Operator.

## Removing the Operators

Follow this procedure to remove the Operators that make up Red Hat OpenShift Service Mesh. Repeat the steps for each of the following Operators.

* Red Hat OpenShift Service Mesh
* Kiali
* Red Hat OpenShift Distributed Tracing Platform (Jaeger)
* OpenShift Elasticsearch

1. Log in to the {product-title} web console.
2. From the Ecosystem -> Installed Operators page, scroll or type a keyword into the Filter by name to find each Operator. Then, click the Operator name.
3. On the Operator Details page, select Uninstall Operator from the Actions menu. Follow the prompts to uninstall each Operator.

## Clean up Operator resources

Follow this procedure to manually remove resources left behind after removing the Red Hat OpenShift Service Mesh Operator using the {product-title} web console.

* An account with cluster administration access.
* Access to the OpenShift CLI (oc).

1. Log in to the {product-title} CLI as a cluster administrator.
2. Run the following commands to clean up resources after uninstalling the Operators. If you intend to keep using Jaeger as a stand alone service without service mesh, do not delete the Jaeger resources.

[NOTE]
----
The Operators are installed in the openshift-operators namespace by default.  If you installed the Operators in another namespace, replace openshift-operators with the name of the project where the Red Hat OpenShift Service Mesh Operator was installed.
----

```terminal
$ oc delete validatingwebhookconfiguration/openshift-operators.servicemesh-resources.maistra.io
```


```terminal
$ oc delete mutatingwebhookconfiguration/openshift-operators.servicemesh-resources.maistra.io
```


```terminal
$ oc delete -n openshift-operators daemonset/istio-node
```


```terminal
$ oc delete clusterrole/istio-admin clusterrole/istio-cni clusterrolebinding/istio-cni
```


```terminal
$ oc delete clusterrole istio-view istio-edit
```


```terminal
$ oc delete clusterrole jaegers.jaegertracing.io-v1-admin jaegers.jaegertracing.io-v1-crdview jaegers.jaegertracing.io-v1-edit jaegers.jaegertracing.io-v1-view
```


```terminal
$ oc get crds -o name | grep '.*\.istio\.io' | xargs -r -n 1 oc delete
```


```terminal
$ oc get crds -o name | grep '.*\.maistra\.io' | xargs -r -n 1 oc delete
```


```terminal
$ oc get crds -o name | grep '.*\.kiali\.io' | xargs -r -n 1 oc delete
```


```terminal
$ oc delete crds jaegers.jaegertracing.io
```


```terminal
$ oc delete svc admission-controller -n <operator-project>
```


```terminal
$ oc delete project <istio-system-project>
```
