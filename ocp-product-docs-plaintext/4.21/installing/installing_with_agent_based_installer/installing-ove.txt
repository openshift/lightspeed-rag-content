# Installing a cluster without an external registry


You can deploy an {product-title} cluster without the need for an external image registry, either in a connected or disconnected environment. This installation method uses a simplified user interface and self-contained media to facilitate the installation.
Although the method supports general clusters, the downloaded media contains an Operator bundle that is curated specifically for Red Hat OpenShift Virtualization Engine, meaning additional Operators must be retrieved separately if required for other use cases.

[IMPORTANT]
----
Installing an OpenShift Virtualization Engine cluster using this method is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
For more information about the support scope of Red Hat Technology Preview features, see Technology Preview Features Support Scope.
----

# Installation method advantages

This method has several advantages for users who want to install a cluster primarily to run virtualized workloads using OpenShift Virtualization.

Simplified web interface:: The cluster installation is performed through a graphical user interface.
In addition to providing reasonable default configurations, this interface guides you through the installation by providing hints and warnings about configuring your cluster, without limiting the configurations that are available at installation time.
This reduces the need for in-depth knowledge of {product-title} while still allowing for complex configurations to be made.
No external registry needed:: If you are installing your cluster in a disconnected environment, you do not need to configure an external image registry in your environment when using this method.
All other disconnected installation methods require this additional environment setup.
Included Operator bundle:: You can install the Virtualization bundle, which includes all of the additional Operator Lifecycle Manager (OLM) Operators needed to run virtual machines on your cluster, at the same time as the cluster installation.


[NOTE]
----
This installation method does not come with any storage Operators as part of the Operator bundle.
You must configure your own storage solution separately.
----

# Downloading the installation ISO

You must first download the ISO image that will be used to run the installation on your bare-metal machines.
This image includes all of the necessary {product-title} release images, as well as the Operator Lifecycle Manager (OLM) Operators needed to install Virtualization on the cluster.


[NOTE]
----
The size of the ISO image can vary depending on the release you select.
----

1. Log in to the Red Hat Hybrid Cloud Console.
2. On the Red Hat OpenShift tile, click OpenShift.
3. On the Red Hat OpenShift Container Platform tile, click Create cluster.
4. Click the Datacenter tab.
5. Under Assisted Installer, click Create cluster.
6. In the Cluster details page, select the toggle for "I'm installing on a disconnected/air-gapped/secured environment".
7. Click Next.
8. Click Download ISO.

# Mounting the ISO and booting the rendezvous node

To initiate the cluster installation, attach the downloaded ISO to the machine that will serve as your rendezvous host and boot the machine from the ISO.

The rendezvous node runs as the bootstrap host during the installation, which hosts the configuration web console and runs an Assisted Service that facilitates the cluster deployment.

* You have downloaded the installation ISO.

1. On the machine that you have designated to be the rendezvous node, attach the ISO image to the machine and boot the machine from this image.
You can also boot from a USB drive containing the ISO image.

[NOTE]
----
If you mount the ISO via a virtual drive, the cluster installation might take several hours to complete.
Mount the ISO with physical media such as a USB drive to reduce the overall installation time.
----
2. Wait for the machine to boot from the image and display the Rendezvous node setup menu.
3. Select This is the rendezvous node in the Rendezvous node setup menu.

[IMPORTANT]
----
You must select only one machine to act as the rendezvous node.
Selecting two or more machines as a rendezvous node is not supported.
----
4. In the Rendezvous node IP selection menu, select an IP address from the list to use as the rendezvous node IP address and select Continue.
Make note of this address for later use.
5. Wait for the rendezvous node to provide a URL for finishing the installation and save the URL for later use, as shown in the following image.
![The rendezvous host providing the URL of the installation console]

# Configuring cluster details and choosing Operators to install

Once the rendezvous node has been booted from the ISO image, configure details about your cluster and choose Virtualization Operators to install from the web console.

* You have the URL of the installation web console that was provided by the rendezvous node.

1. In a web browser, go to the URL provided by the rendezvous node.
2. Configure your cluster in the Cluster details page:
1. Enter a name for the cluster in the Cluster name field.
2. Enter a base domain for the cluster in the Base domain field.
All subdomains for the cluster will use this base domain.

[NOTE]
----
The base domain must be a valid DNS name.
You must not have a wildcard domain set up for the base domain.
----
3. Enter your pull secret in the Pull secret field.
You can obtain a copy of your pull secret from the Red Hat Hybrid Cloud Console.
4. Optional: In the Number of control plane nodes field, select the number of control plane nodes for your installation from the dropdown menu.
The default value is 3.
5. Optional: Select the Include custom manifests checkbox if you want to upload custom manifests to further configure your cluster.
This option adds an additional page for custom manifests that you use later in the configuration process.

[IMPORTANT]
----
If you have already added custom manifests, clearing the Include custom manifests checkbox automatically deletes them all.
You must confirm the deletion.
----
6. Optional: Under Encryption of installation disks, select the toggle switch for each disk you want to encrypt.
7. If you are encrypting disks, select either TPM v2 or Tang as your encryption method.
8. If you are encrypting disks using a Tang server, enter the Server URL and Server Thumbprint in the Tang servers section of the page. You can select Add another Tang server to configure details for additional Tang server.
9. Click Next to continue.
Once you proceed to the next page, you cannot go back to change any of these cluster details.
3. Choose additional Operators to install in the Operators page:
1. If you want to install all of the Operators recommended for running Virtualization on your cluster, select Virtualization in the Bundles section.
2. If you want to install only some Operators, select the individual Operators from the Single Operators section.

[NOTE]
----
Some of the listed Operators are available only as part of the Virtualization Operator bundle.
----
3. Click Next to continue.

# Booting the remaining cluster hosts

After you have configured initial cluster details in the installation web console and have a defined cluster topology, you must boot the remaining machines that will make up your cluster from the ISO image.


[NOTE]
----
You can boot non-rendezvous node machines earlier in the installation process, even before you designate a machine as the rendezvous node. However, you must know the valid IP address that you will select for the rendezvous node.
When you boot your non-rendezvous node machines, the machines will perform a check to see if an Assisted Service is running at the specified rendezvous IP address.
If the service is not yet running, a warning appears to confirm whether you would still like to proceed booting the machine from the ISO image.
----

* You have downloaded the installation ISO.

1. Attach the ISO image to a machine and boot the machine from this image.
You can also boot from a USB drive containing the ISO image.
2. Wait for a machine to boot from the image and display the Rendezvous node setup menu.
3. Enter the rendezvous node IP address in the Rendezvous node setup menu and select Save rendezvous IP.
4. Select Save and Continue.
5. Repeat this process for each remaining machine that will comprise the hosts in your cluster.

# Completing cluster configuration and initiating the installation

Before you can finally initiate the cluster installation, you must verify host details, configure cluster networking details, and download the default cluster credentials.

* You have booted all of the hosts that will comprise your cluster and configured them with the correct rendezvous node IP address.

[IMPORTANT]
----
You can add as many hosts as you want to your cluster.
However, at this stage, you must at least have enough available hosts to match the value you specified in the Number of control plane nodes field of the installation console's Cluster details page.
----

1. On the installation console hosted by the rendezvous node, configure the hosts in the Host discovery page:
1. Verify that every machine you booted from the ISO image appears in the Host Inventory section and has a Status value of Ready.
2. For each host, click the expand icon and verify that all of the specification fields are correct.
3. Optional: For each host except the rendezvous node, configure the role by selecting an option from the dropdown menu of the Role column.
The default value for every host except the rendezvous node is Auto-assign.
4. Click Next to continue.
2. On the Storage page, click the expand icon for each host and verify that all of the specification fields are correct.
3. Click Next to continue.
4. If you want to manage your own networking, select the User-Managed Networking option on the Networking page.
5. If you want the cluster to manage networking, select the Cluster-Managed Networking option on the Networking page and configure cluster networking:
1. Select a Networking stack type.
2. Optional: Select a machine network from the dropdown menu of the Machine network field.
Otherwise, a default value is selected.
3. Enter an IP address in the API IP field.
An API IP provides an endpoint for all users to interact with and configure the platform.
4. Enter an IP address in the Ingress IP field.
An ingress IP provides an endpoint for application traffic flowing from outside the cluster.
6. Optional: Select the Use advanced networking checkbox and configure other parameters such as the Cluster network CIDR, the Cluster network host prefix, or the Service network CIDR.

This option is available for both cluster-managed and user-managed networking.
7. Optional: Enter a key in the Host SSH Public Key for troubleshooting after installation field, which you can use to connect to hosts using a public SSH key for troubleshooting after installation.

This option is available for both cluster-managed and user-managed networking.
8. Click Next to continue.
9. On the Download credentials page, select the checkbox to acknowledge that you must download credential files prior to cluster installation.
10. Click Download credentials and save the cluster credentials file in a secure location.

[IMPORTANT]
----
You must download the credentials at this stage.
Once you initiate the cluster installation, the rendezvous node reboots and you can no longer retrieve the credentials.
----
11. On the Review and create page, review all of the cluster details and click Install cluster to initiate the cluster installation.

During the installation process, the rendezvous node reboots and the console you used to configure the installation is no longer accessible.
At that point, the URL of the deployed cluster&#8217;s web console is provided, although this console is not accessible until the cluster installation is completed.

Once the cluster is installed, you can visit this URL and sign in to the web console with your downloaded credentials.

# Additional resources

* Installing virtctl
* Creating virtual machines from instance types
* Creating virtual machines from templates
* Migrating virtual machines from VMware vSphere (Migration Toolkit for Virtualization documentation)
* Migrating virtual machines from Red Hat Virtualization (Migration Toolkit for Virtualization documentation)