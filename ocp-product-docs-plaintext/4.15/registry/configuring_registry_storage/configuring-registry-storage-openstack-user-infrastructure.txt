Configuring the registry for OpenStack user-provisioned infrastructure

You can configure the registry of a cluster that runs on your own OpenStack infrastructure.
Configuring the Image Registry Operator to trust Swift storage
You must configure the Image Registry Operator to trust OpenStack Swift storage.

From a command line, enter the following command to change the value of the spec.disableRedirect field in the config.imageregistry object to true:
Configuring a secret for the Image Registry Operator
In addition to the configs.imageregistry.operator.openshift.io and ConfigMap resources, configuration is provided to the Operator by a separate secret resource located within the openshift-image-registry namespace.

The image-registry-private-configuration-user secret provides credentials needed for storage access and management. It overrides the default credentials used by the Operator, if default credentials were found.

For Swift on OpenStack storage, the secret is expected to contain the following two keys:

REGISTRY_STORAGE_SWIFT_USERNAME

REGISTRY_STORAGE_SWIFT_PASSWORD


Create an Red Hat OpenShift Container Platform secret that contains the required keys.
Registry storage for OpenStack with user-provisioned infrastructure
If the Registry Operator cannot create a Swift bucket, you must set up the storage medium manually and configure the settings in the registry custom resource (CR).

A cluster on OpenStack with user-provisioned infrastructure.

To configure registry storage for OpenStack, you need to provide Registry Operator
cloud credentials.

For Swift on OpenStack storage, the secret is expected to contain the following two keys:


Fill in the storage configuration in configs.imageregistry.operator.openshift.io/cluster:
Image Registry Operator configuration parameters for OpenStack Swift
The following configuration parameters are available for OpenStack Swift registry storage.