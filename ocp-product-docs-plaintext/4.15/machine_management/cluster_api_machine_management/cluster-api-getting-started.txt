Getting started with the Cluster API

Managing machines with the Cluster API is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.

For more information about the support scope of Red Hat Technology Preview features, see Technology Preview Features Support Scope.
For the Cluster API Technology Preview, you must create the primary resources that the Cluster API requires manually.
Creating the Cluster API primary resources
To create the Cluster API primary resources, you must obtain the cluster ID value, which you use for the <cluster_name> parameter in the cluster resource manifest.

Obtaining the cluster ID value
You can find the cluster ID value by using the OpenShift CLI (`oc`).

You have deployed an Red Hat OpenShift Container Platform cluster.

You have access to the cluster using an account with cluster-admin permissions.

You have installed the OpenShift CLI (`oc`).


Obtain the value of the cluster ID by running the following command:


You can create the Cluster API primary resources manually by creating YAML manifest files and applying them with the OpenShift CLI (`oc`).
Creating the Cluster API cluster resource
You can create the cluster resource by creating a YAML manifest file and applying it with the OpenShift CLI (`oc`).

You have deployed an Red Hat OpenShift Container Platform cluster.

You have enabled the use of the Cluster API.

You have access to the cluster using an account with cluster-admin permissions.

You have installed the OpenShift CLI (`oc`).

You have the cluster ID value.


Create a YAML file similar to the following. This procedure uses <cluster_resource_file>.yaml as an example file name.

Create the cluster CR by running the following command:


Confirm that the cluster CR exists by running the following command:


Cluster API configuration
Creating a Cluster API infrastructure resource
You can create a provider-specific infrastructure resource by creating a YAML manifest file and applying it with the OpenShift CLI (`oc`).

You have deployed an Red Hat OpenShift Container Platform cluster.

You have enabled the use of the Cluster API.

You have access to the cluster using an account with cluster-admin permissions.

You have installed the OpenShift CLI (`oc`).

You have the cluster ID value.

You have created and applied the cluster resource.


Create a YAML file similar to the following. This procedure uses <infrastructure_resource_file>.yaml as an example file name.

Create the infrastructure CR by running the following command:


Confirm that the infrastructure CR is created by running the following command:


Sample YAML for a Cluster API infrastructure resource on Amazon Web Services

Sample YAML for a Cluster API infrastructure resource on Google Cloud Platform
Creating a Cluster API machine template
You can create a provider-specific machine template resource by creating a YAML manifest file and applying it with the OpenShift CLI (`oc`).

You have deployed an Red Hat OpenShift Container Platform cluster.

You have enabled the use of the Cluster API.

You have access to the cluster using an account with cluster-admin permissions.

You have installed the OpenShift CLI (`oc`).

You have created and applied the cluster and infrastructure resources.


Create a YAML file similar to the following. This procedure uses <machine_template_resource_file>.yaml as an example file name.

Create the machine template CR by running the following command:


Confirm that the machine template CR is created by running the following command:


Sample YAML for a Cluster API machine template resource on Amazon Web Services

Sample YAML for a Cluster API machine template resource on Google Cloud Platform
Creating a Cluster API compute machine set
You can create compute machine sets that use the Cluster API to dynamically manage the machine compute resources for specific workloads of your choice.

You have deployed an Red Hat OpenShift Container Platform cluster.

You have enabled the use of the Cluster API.

You have access to the cluster using an account with cluster-admin permissions.

You have installed the OpenShift CLI (`oc`).

You have created the cluster, infrastructure, and machine template resources.


Create a YAML file similar to the following. This procedure uses <machine_set_resource_file>.yaml as an example file name.

Create the compute machine set CR by running the following command:

Confirm that the compute machine set CR is created by running the following command:


To verify that the compute machine set is creating machines according to your required configuration, review the lists of machines and nodes in the cluster by running the following commands:


Sample YAML for a Cluster API compute machine set resource on Amazon Web Services

Sample YAML for a Cluster API compute machine set resource on Google Cloud Platform