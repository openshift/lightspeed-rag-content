# Installing a cluster



# Cleaning up previous installations

In case of an earlier failed deployment, remove the artifacts from the failed attempt before trying to deploy {product-title} again.

1. Power off all bare-metal nodes before installing the {product-title} cluster by using the following command:

```terminal
$ ipmitool -I lanplus -U <user> -P <password> -H <management_server_ip> power off
```

2. Remove all old bootstrap resources if any remain from an earlier deployment attempt by using the following script:

```bash
for i in $(sudo virsh list | tail -n +3 | grep bootstrap | awk {'print $2'});
do
  sudo virsh destroy $i;
  sudo virsh undefine $i;
  sudo virsh vol-delete $i --pool $i;
  sudo virsh vol-delete $i.ign --pool $i;
  sudo virsh pool-destroy $i;
  sudo virsh pool-undefine $i;
done
```

3. Delete the artifacts that the earlier installation generated by using the following command:

```terminal
$ cd ; /bin/rm -rf auth/ bootstrap.ign master.ign worker.ign metadata.json \
.openshift_install.log .openshift_install_state.json
```

4. Re-create the {product-title} manifests by using the following command:

```terminal
$ ./openshift-baremetal-install --dir ~/clusterconfigs create manifests
```


# Deploying the cluster via the {product-title} installer

Run the {product-title} installer:


```terminal
$ ./openshift-baremetal-install --dir ~/clusterconfigs --log-level debug create cluster
```


# Following the progress of the installation

During the deployment process, you can check the installation&#8217;s overall status by issuing the tail command to the .openshift_install.log log file in the install directory folder:


```terminal
$ tail -f /path/to/install-dir/.openshift_install.log
```


# Verifying static IP address configuration

If the DHCP reservation for a cluster node specifies an infinite lease, after the installer successfully provisions the node, the dispatcher script checks the node&#8217;s network configuration. If the script determines that the network configuration contains an infinite DHCP lease, it creates a new connection using the IP address of the DHCP lease as a static IP address.


[NOTE]
----
The dispatcher script might run on successfully provisioned nodes while the provisioning of other nodes in the cluster is ongoing.
----

Verify the network configuration is working properly.

1. Check the network interface configuration on the node.
2. Turn off the DHCP server and reboot the {product-title} node and ensure that the network configuration works properly.

# Additional resources

* Understanding update channels and releases