# Uninstalling the Zero Trust Workload Identity Manager



[IMPORTANT]
----
Zero Trust Workload Identity Manager is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
For more information about the support scope of Red Hat Technology Preview features, see Technology Preview Features Support Scope.
----
You can remove the Zero Trust Workload Identity Manager from {product-title} by uninstalling the Operator and removing its related resources.

# Uninstalling the Zero Trust Workload Identity Manager

You can uninstall the Zero Trust Workload Identity Manager by using the web console.

* You have access to the cluster with cluster-admin privileges.
* You have access to the {product-title} web console.
* The Zero Trust Workload Identity Manager is installed.

1. Log in to the {product-title} web console.
2. Uninstall the Zero Trust Workload Identity Manager.
1. Go to Operators -> Installed Operators.
2. Click the Options menu next to the Zero Trust Workload Identity Manager entry, and then click Uninstall Operator.
3. In the confirmation dialog, click Uninstall.

# Uninstalling Zero Trust Workload Identity Manager resources by using the CLI

After you have uninstalled the Zero Trust Workload Identity Manager, you have the option to delete its associated resources from your cluster.

* You have access to the cluster with cluster-admin privileges.

1. Uninstall the operands by running each of the following commands:
1. Delete the ZeroTrustWorkloadIdentityManager cluster by running the following command:

```terminal
$ oc delete ZeroTrustWorkloadIdentityManager cluster
```

2. Delete the SpireOIDCDiscoveryProvider cluster by running the following command:

```terminal
$ oc delete SpireOIDCDiscoveryProvider cluster
```

3. Delete the SpiffeCSIDriver cluster by running the following command:

```terminal
$ oc delete SpiffeCSIDriver cluster
```

4. Delete the SpireAgent cluster by running the following command:

```terminal
$ oc delete SpireAgent cluster
```

5. Delete the SpireServer cluster by running the following command:

```terminal
$ oc delete SpireServer cluster
```

6. Delete the Persistent Volume Claim (PVC) by running the following command:

```terminal
$ oc delete pvc -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

7. Delete the CSI Driver by running the following command:

```terminal
$ oc delete csidriver -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

8. Delete the service by running the following command:

```terminal
$ oc delete service -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

9. Delete the namespace by running the following command:

```terminal
$ oc delete ns zero-trust-workload-identity-manager
```

10. Delete the cluster role binding by running the following command:

```terminal
$ oc delete clusterrolebinding -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

11. Delete the cluster role by running the following command:

```terminal
$ oc delete clusterrole -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

12. Delete the admission wehhook configuration by running the following command:

```terminal
$ oc delete validatingwebhookconfigurations -l=app.kubernetes.io/managed-by=zero-trust-workload-identity-manager
```

2. Delete the custom resource definitions (CRDs) by running each of the following commands:
1. Delete the SPIRE Server CRD by running the following command:

```terminal
$ oc delete crd spireservers.operator.openshift.io
```

2. Delete the SPIRE Agent CRD by running the following command:

```terminal
$ oc delete crd spireagents.operator.openshift.io
```

3. Delete the SPIFFEE CSI Drivers CRD by running the following command:

```terminal
$ oc delete crd spiffecsidrivers.operator.openshift.io
```

4. Delete the SPIRE OIDC Discovery Provider CRD by running the following command:

```terminal
$ oc delete crd spireoidcdiscoveryproviders.operator.openshift.io
```

5. Delete the SPIRE and SPIFFE cluster federated trust domains CRD by running the following command:

```terminal
$ oc delete crd clusterfederatedtrustdomains.spire.spiffe.io
```

6. Delete the cluster SPIFFE IDs CRD by running the following command:

```terminal
$ oc delete crd clusterspiffeids.spire.spiffe.io
```

7. Delete the SPIRE and SPIFFE cluster static entries CRD by running the following command:

```terminal
$ oc delete crd clusterstaticentries.spire.spiffe.io
```

8. Delete the Zero Trust Workload Identity Manager CRD by running the following command:

```terminal
$ oc delete crd zerotrustworkloadidentitymanagers.operator.openshift.io
```


To verify that the resources have been deleted, replace each oc delete command with oc get, and then run the command. If no resources are returned, the deletion was successful.