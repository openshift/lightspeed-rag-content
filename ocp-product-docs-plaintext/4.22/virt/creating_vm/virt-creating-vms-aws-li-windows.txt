# Creating a license-compliant AWS EC2 Windows VM


If you are running Windows virtual machines (VMs) on Red Hat OpenShift Container Platform hosts, such as AMD64 bare metal EC2 instances with Amazon Web Services (AWS) Windows License Included (LI) enabled, you must ensure that any VMs you create are compliant with licensing requirements.
When you configure your Windows VMs correctly, they activate automatically with the AWS Key Management Service (KMS), and run using optimized drivers for the underlying bare-metal hardware. Proper configuration also ensures that billing is correct.
If you do not configure your Windows VMs so that they are license-compliant, they might fail to activate, suffer degraded system performance due to sub-optimal CPU pinning, and risk failing a licensing audit.

# Creating a license-compliant AWS EC2 Windows VM by using the web console

You can create license-compliant Windows virtual machines (VMs) by enabling the dedicatedCpuPlacement attribute. This attribute is enabled by default on instance types from the d1 family. In the Red Hat OpenShift Container Platform web console, you can create a compliant VM by selecting from a list of available bootable volumes.

1. In the Red Hat OpenShift Container Platform web console, go to Virtualization -> Catalog. The InstanceTypes tab opens by default.
2. Click Add volume to create a Windows boot source. You can create a Windows boot source by uploading a new volume or by using an existing persistent volume claim (PVC), a volume snapshot, or a containerDisk volume.
3. In the Volume metadata section, select a preference with a name that begins with windows and is followed by the Windows version of your choice. For example, windows.11.virtio. Click Save.
4. Select a bootable volume from the list. If the list is truncated, click Show all to display the entire list. The bootable volume table contains the previously uploaded boot source.
5. In the User provided tab, select an instance type with a name that begins with d1. For example, d1.2xmedium for a Windows 11 VM.
6. Optional: You can mount a Windows driver disk by completing the following steps:
1. Click Customize VirtualMachine.
2. On the VirtualMachine details page, click Storage.
3. Select the Mount Windows drivers disk checkbox.
7. Click Create VirtualMachine.