# Authentication [config.openshift.io/v1]


Description:: 
Authentication specifies cluster-wide settings for authentication (like OAuth and
webhook token authenticators). The canonical name of an instance is cluster.
Compatibility level 1: Stable within a major release for a minimum of 12 months or 3 minor releases (whichever is longer).
Type:: object
Required:: 
* spec

# Specification



## .spec

Description:: 
spec holds user settable values for configuration
Type:: object



## .spec.oauthMetadata

Description:: 
oauthMetadata contains the discovery endpoint data for OAuth 2.0
Authorization Server Metadata for an external OAuth server.
This discovery document can be viewed from its served location:
oc get --raw '/.well-known/oauth-authorization-server'
For further details, see the IETF Draft:
https://tools.ietf.org/html/draft-ietf-oauth-discovery-04#section-2
If oauthMetadata.name is non-empty, this value has precedence
over any metadata reference stored in status.
The key "oauthMetadata" is used to locate the data.
If specified and the config map or expected key is not found, no metadata is served.
If the specified metadata is not valid, no metadata is served.
The namespace for this config map is openshift-config.
Type:: object
Required:: 
* name



## .spec.oidcProviders

Description:: 
oidcProviders are OIDC identity providers that can issue tokens
for this cluster
Can only be set if "Type" is set to "OIDC".
At most one provider can be configured.
Type:: array

## .spec.oidcProviders[]

Description:: 

Type:: object
Required:: 
* claimMappings
* issuer
* name



## .spec.oidcProviders[].claimMappings

Description:: 
claimMappings is a required field that configures the rules to be used by
the Kubernetes API server for translating claims in a JWT token, issued
by the identity provider, to a cluster identity.
Type:: object
Required:: 
* username



## .spec.oidcProviders[].claimMappings.extra

Description:: 
extra is an optional field for configuring the mappings
used to construct the extra attribute for the cluster identity.
When omitted, no extra attributes will be present on the cluster identity.
key values for extra mappings must be unique.
A maximum of 32 extra attribute mappings may be provided.
Type:: array

## .spec.oidcProviders[].claimMappings.extra[]

Description:: 
ExtraMapping allows specifying a key and CEL expression
to evaluate the keys' value. It is used to create additional
mappings and attributes added to a cluster identity from
a provided authentication token.
Type:: object
Required:: 
* key
* valueExpression



## .spec.oidcProviders[].claimMappings.groups

Description:: 
groups is an optional field that configures how the groups of a cluster identity
should be constructed from the claims in a JWT token issued
by the identity provider.
When referencing a claim, if the claim is present in the JWT
token, its value must be a list of groups separated by a comma (',').
For example - '"example"' and '"exampleOne", "exampleTwo", "exampleThree"' are valid claim values.
Type:: object
Required:: 
* claim



## .spec.oidcProviders[].claimMappings.uid

Description:: 
uid is an optional field for configuring the claim mapping
used to construct the uid for the cluster identity.
When using uid.claim to specify the claim it must be a single string value.
When using uid.expression the expression must result in a single string value.
When omitted, this means the user has no opinion and the platform
is left to choose a default, which is subject to change over time.
The current default is to use the 'sub' claim.
Type:: object



## .spec.oidcProviders[].claimMappings.username

Description:: 
username is a required field that configures how the username of a cluster identity
should be constructed from the claims in a JWT token issued by the identity provider.
Type:: object
Required:: 
* claim



## .spec.oidcProviders[].claimMappings.username.prefix

Description:: 
prefix configures the prefix that should be prepended to the value
of the JWT claim.
prefix must be set when prefixPolicy is set to 'Prefix' and must be unset otherwise.
Type:: object
Required:: 
* prefixString



## .spec.oidcProviders[].claimValidationRules

Description:: 
claimValidationRules is an optional field that configures the rules to
be used by the Kubernetes API server for validating the claims in a JWT
token issued by the identity provider.
Validation rules are joined via an AND operation.
Type:: array

## .spec.oidcProviders[].claimValidationRules[]

Description:: 

Type:: object



## .spec.oidcProviders[].claimValidationRules[].requiredClaim

Description:: 
requiredClaim is an optional field that configures the required claim
and value that the Kubernetes API server will use to validate if an incoming
JWT is valid for this identity provider.
Type:: object
Required:: 
* claim
* requiredValue



## .spec.oidcProviders[].issuer

Description:: 
issuer is a required field that configures how the platform interacts
with the identity provider and how tokens issued from the identity provider
are evaluated by the Kubernetes API server.
Type:: object
Required:: 
* audiences
* issuerURL



## .spec.oidcProviders[].issuer.issuerCertificateAuthority

Description:: 
issuerCertificateAuthority is an optional field that configures the
certificate authority, used by the Kubernetes API server, to validate
the connection to the identity provider when fetching discovery information.
When not specified, the system trust is used.
When specified, it must reference a ConfigMap in the openshift-config
namespace containing the PEM-encoded CA certificates under the 'ca-bundle.crt'
key in the data field of the ConfigMap.
Type:: object
Required:: 
* name



## .spec.oidcProviders[].oidcClients

Description:: 
oidcClients is an optional field that configures how on-cluster,
platform clients should request tokens from the identity provider.
oidcClients must not exceed 20 entries and entries must have unique namespace/name pairs.
Type:: array

## .spec.oidcProviders[].oidcClients[]

Description:: 
OIDCClientConfig configures how platform clients
interact with identity providers as an authentication
method
Type:: object
Required:: 
* clientID
* componentName
* componentNamespace



## .spec.oidcProviders[].oidcClients[].clientSecret

Description:: 
clientSecret is an optional field that configures the client secret used
by the platform component when making authentication requests to the identity provider.
When not specified, no client secret will be used when making authentication requests
to the identity provider.
When specified, clientSecret references a Secret in the 'openshift-config'
namespace that contains the client secret in the 'clientSecret' key of the '.data' field.
The client secret will be used when making authentication requests to the identity provider.
Public clients do not require a client secret but private
clients do require a client secret to work with the identity provider.
Type:: object
Required:: 
* name



## .spec.webhookTokenAuthenticator

Description:: 
webhookTokenAuthenticator configures a remote token reviewer.
These remote authentication webhooks can be used to verify bearer tokens
via the tokenreviews.authentication.k8s.io REST API. This is required to
honor bearer tokens that are provisioned by an external authentication service.
Can only be set if "Type" is set to "None".
Type:: object
Required:: 
* kubeConfig



## .spec.webhookTokenAuthenticator.kubeConfig

Description:: 
kubeConfig references a secret that contains kube config file data which
describes how to access the remote webhook service.
The namespace for the referenced secret is openshift-config.
For further details, see:
https://kubernetes.io/docs/reference/access-authn-authz/authentication/#webhook-token-authentication
The key "kubeConfig" is used to locate the data.
If the secret or expected key is not found, the webhook is not honored.
If the specified kube config data is not valid, the webhook is not honored.
Type:: object
Required:: 
* name



## .spec.webhookTokenAuthenticators

Description:: 
webhookTokenAuthenticators is DEPRECATED, setting it has no effect.
Type:: array

## .spec.webhookTokenAuthenticators[]

Description:: 
deprecatedWebhookTokenAuthenticator holds the necessary configuration options for a remote token authenticator.
It's the same as WebhookTokenAuthenticator but it's missing the 'required' validation on KubeConfig field.
Type:: object



## .spec.webhookTokenAuthenticators[].kubeConfig

Description:: 
kubeConfig contains kube config file data which describes how to access the remote webhook service.
For further details, see:
https://kubernetes.io/docs/reference/access-authn-authz/authentication/#webhook-token-authentication
The key "kubeConfig" is used to locate the data.
If the secret or expected key is not found, the webhook is not honored.
If the specified kube config data is not valid, the webhook is not honored.
The namespace for this secret is determined by the point of use.
Type:: object
Required:: 
* name



## .status

Description:: 
status holds observed values from the cluster. They may not be overridden.
Type:: object



## .status.integratedOAuthMetadata

Description:: 
integratedOAuthMetadata contains the discovery endpoint data for OAuth 2.0
Authorization Server Metadata for the in-cluster integrated OAuth server.
This discovery document can be viewed from its served location:
oc get --raw '/.well-known/oauth-authorization-server'
For further details, see the IETF Draft:
https://tools.ietf.org/html/draft-ietf-oauth-discovery-04#section-2
This contains the observed value based on cluster state.
An explicitly set value in spec.oauthMetadata has precedence over this field.
This field has no meaning if authentication spec.type is not set to IntegratedOAuth.
The key "oauthMetadata" is used to locate the data.
If the config map or expected key is not found, no metadata is served.
If the specified metadata is not valid, no metadata is served.
The namespace for this config map is openshift-config-managed.
Type:: object
Required:: 
* name



## .status.oidcClients

Description:: 
oidcClients is where participating operators place the current OIDC client status
for OIDC clients that can be customized by the cluster-admin.
Type:: array

## .status.oidcClients[]

Description:: 
OIDCClientStatus represents the current state
of platform components and how they interact with
the configured identity providers.
Type:: object
Required:: 
* componentName
* componentNamespace



## .status.oidcClients[].conditions

Description:: 
conditions are used to communicate the state of the oidcClients entry.
Supported conditions include Available, Degraded and Progressing.
If Available is true, the component is successfully using the configured client.
If Degraded is true, that means something has gone wrong trying to handle the client configuration.
If Progressing is true, that means the component is taking some action related to the oidcClients entry.
Type:: array

## .status.oidcClients[].conditions[]

Description:: 
Condition contains details for one aspect of the current state of this API Resource.
Type:: object
Required:: 
* lastTransitionTime
* message
* reason
* status
* type



## .status.oidcClients[].currentOIDCClients

Description:: 
currentOIDCClients is an optional list of clients that the component is currently using.
Entries must have unique issuerURL/clientID pairs.
Type:: array

## .status.oidcClients[].currentOIDCClients[]

Description:: 
OIDCClientReference is a reference to a platform component
client configuration.
Type:: object
Required:: 
* clientID
* issuerURL
* oidcProviderName



# API endpoints

The following API endpoints are available:

* /apis/config.openshift.io/v1/authentications
* DELETE: delete collection of Authentication
* GET: list objects of kind Authentication
* POST: create an Authentication
* /apis/config.openshift.io/v1/authentications/{name}
* DELETE: delete an Authentication
* GET: read the specified Authentication
* PATCH: partially update the specified Authentication
* PUT: replace the specified Authentication
* /apis/config.openshift.io/v1/authentications/{name}/status
* GET: read status of the specified Authentication
* PATCH: partially update status of the specified Authentication
* PUT: replace status of the specified Authentication

## /apis/config.openshift.io/v1/authentications

HTTP method:: DELETE
Description:: delete collection of Authentication



HTTP method:: GET
Description:: list objects of kind Authentication



HTTP method:: POST
Description:: create an Authentication







## /apis/config.openshift.io/v1/authentications/{name}



HTTP method:: DELETE
Description:: delete an Authentication





HTTP method:: GET
Description:: read the specified Authentication



HTTP method:: PATCH
Description:: partially update the specified Authentication





HTTP method:: PUT
Description:: replace the specified Authentication







## /apis/config.openshift.io/v1/authentications/{name}/status



HTTP method:: GET
Description:: read status of the specified Authentication



HTTP method:: PATCH
Description:: partially update status of the specified Authentication





HTTP method:: PUT
Description:: replace status of the specified Authentication





